<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Datos de Potencia Activa</title>
    <style>
        .responsive-image {display: block;margin: 0 auto;max-width: 80%;height: auto;}
        .c-naranja {background-color: #fcd1c6;padding: 10px;border-radius: 15px;
      		max-width: 85%;margin: 0 auto 0 5%; /*S-D-Inf-Iz*/}
    	.c-gris {background-color: #E3E4E5;padding: 10px;border-radius: 15px;
        	max-width: 85%;margin: 0 auto 0 5%; /*S-D-Inf-Iz*/}
	table {width: 70%;border-collapse: collapse;/*Para ver CSV*/
	      margin-left: auto; margin-right: auto;}
        th, td {border: 1px solid white;padding: 2px;text-align: center;/*Para ver CSV*/}
	/*Contenedor de dos botones a la derecha de la pagina*/
        .button-container {display: flex;justify-content: flex-end;margin-top: 20px;}
        .custom-button {justify-content: end;padding: 10px 10px;line-height: 20px;
                        text-align: start;margin-left: 10px; /* Espacio entre botones */}
    </style>
	<script>
		function CargarImagen(url) {window.open(url, '_blank');}
		function mostrarCSV(url) {fetch(url).then(response => response.text()).then(data => {
                    const rows = data.split('\n').slice(0, 10);
                    const table = document.createElement('table');
			rows.forEach(row => {const tr = document.createElement('tr');
			row.split(',').forEach(cell => {
				const td = document.createElement('td');
				td.textContent = cell;tr.appendChild(td);});table.appendChild(tr);});
				/*td.textContent = decodeURIComponent(escape(cell));tr.appendChild(td);});table.appendChild(tr);});*/
			/*document.getElementById('csv-preview').innerHTML = ''; // Limpiar el contenido previo*/
			document.getElementById('csv-preview').appendChild(table);});}
		function abrirCSV(url) {window.open(url, '_blank');}
		document.addEventListener('DOMContentLoaded', () => {
			mostrarCSV('Potencia Disponible-.csv');// Coloca aquí la ruta de tu archivo CSV});
		});

		function updateValue(sliderId) {
			let slider = document.getElementById(sliderId);
			let sliderValue = parseFloat(slider.value);
			if (sliderId === 'sliderTAmb') {document.getElementById('TAmbValue').textContent = sliderValue.toFixed(1);}
			else if (sliderId === 'sliderHAmb'){document.getElementById('HAmbValue').textContent = sliderValue;} 
		
		        let HAmbValue = parseFloat(document.getElementById('sliderHAmb').value);
		        let TAmbValue = parseFloat(document.getElementById('sliderTAmb').value);
		          
			let ResultadoT2 = 0.8 * TAmbValue + 0.2 * HAmbValue - 9.85;
			ResultadoT2 = ResultadoT2.toFixed(1);
			
			let ResultadoPActiva = 0.55 * ResultadoT2 - 0.03 * (ResultadoT2 ** 2) + 90.29;
			ResultadoPActiva = ResultadoPActiva.toFixed(1);
			
			document.getElementById('ResultadoT2').textContent = ResultadoT2;
        		document.getElementById('ResultadoPActiva').textContent = ResultadoPActiva;}
			window.onload = function() {
				updateValue('sliderTAmb');
				updateValue('sliderHAmb');}
	</script>
</head>
<body>
	<!-- Agrega dos botones superiores a la derecha con fecha y nuemero de visitas -->
	<div class="button-container">
		<button class="custom-button" id="Button1"><strong>Texto</strong></button>
		<button class="custom-button" id="Button2">
	            <strong>
	                <a href="https://www.hitwebcounter.com" target="_blank">
	                    <img src="https://hitwebcounter.com/counter/counter.php?page=14000561&style=0011&nbdigits=3&type=page&initCount=0" title="Counter Widget" alt="Visit counter For Websites" border="0" />
	                </a></strong></button>
	</div>
	<script>
	        function formatDate(date) {
	            const day = String(date.getDate()).padStart(2, '0');
	            const month = String(date.getMonth() + 1).padStart(2, '0');
	            const year = date.getFullYear();
	            const hours = String(date.getHours()).padStart(2, '0');
	            const minutes = String(date.getMinutes()).padStart(2, '0');
	            return `${day}/${month}/${year} ${hours}:${minutes}`;
	        }
	        const currentDate = formatDate(new Date());
	        /*En Buttton1 se pone los datos de dd/mm/aaa hh:mm*/
	        document.getElementById('Button1').querySelector('strong').textContent = currentDate;
	</script>
	<!-- Agrega dos botones superiores a la derecha con fecha y nuemero de visitas -->

	
	<div style="text-align: center;"><h1>Datos de Potencia Activa</h1></div>
	<div class="c-naranja">
		<p>Se realizo un análisis visual de la potencia activa de la Unidad LMS100 para los años 2022, 
		2023 y 2024. Se empleó un diagrama de burbujas con colores relacionados a la temperatura en T2.
		Este gráfico permite observar que a bajas temperaturas en T2 se alcanzan potencias mayores.<br>
		En el siguiente gráfico de burbujas</p>
		<ul><li>T2 en amarillo (altas temperaturas) se relacionan con menor potencia</li></ul>
		<ul><li>T2 en azul oscuro (bajas temperaturas) se relacionan con mayor potencia</li></ul>
		<p>Como referencia se agregó una traza fija en la variable Potencia activa con valor de 85 MW</p>
	</div>

	<div  style="text-align: center;"><h2 style="margin: 5px 0;">
		- - - - - - - - - 2022 - - - - - - - - -</h2></div>
	<div class="c-gris" onclick="CargarImagen('Img/001-hd.jpg')" ondblclick="CargarImagen('Img/001-hd.jpg')">
		<img src="Img/001.jpg" alt="Descripción de la imagen" class="responsive-image"></div>
  
	<div  style="text-align: center;"><h2 style="margin: 5px 0;">
		- - - - - - - - - 2023 - - - - - - - - -</h2></div>	
	<div class="c-gris" onclick="CargarImagen('Img/002-hd.jpg')" ondblclick="CargarImagen('Img/002-hd.jpg')">
		<img src="Img/002.jpg" alt="Descripción de la imagen" class="responsive-image"></div>
  
	<div  style="text-align: center;"><h2 style="margin: 5px 0;">
		- - - - - - - - - 2024 - - - - - - - - -</h2></div>
  	<div class="c-gris" onclick="CargarImagen('Img/003-hd.jpg')" ondblclick="CargarImagen('Img/003-hd.jpg')">
		<img src="Img/003.jpg" alt="Descripción de la imagen" class="responsive-image"></div>
 
	<br>
	<div class="c-naranja">
		<p>Para comparar el comportamiento de la potencia en cada año, se efectuó
		una superposición de la potencia activa correspondiente a cada año a lo
		largo de un período de tiempo, dividido en cuatrimestres.</p>
	</div>

	<div  style="text-align: center;"><h2 style="margin: 7px 0;">
		Potencia Activa en los meses de Enero a Abril año 2022/23/24</h2></div>
	<div class="c-gris" onclick="CargarImagen('Img/004-hd.jpg')" ondblclick="CargarImagen('Img/004-hd.jpg')">
		<img src="Img/004.jpg" alt="Descripción de la imagen" class="responsive-image"></div>

	<div  style="text-align: center;"><h2 style="margin: 7px 0;">
		Potencia Activa en los meses de Mayo a Agosto año 2022/23/24</h2></div>
	<div class="c-gris" onclick="CargarImagen('Img/005-hd.jpg')" ondblclick="CargarImagen('Img/005-hd.jpg')">
		<img src="Img/005.jpg" alt="Descripción de la imagen" class="responsive-image"></div>
  
  	<div  style="text-align: center;"><h2 style="margin: 7px 0;">
		Potencia Activa en los meses de Septiembre a Diciembre año 2022/23</h2></div>
	<div class="c-gris" onclick="CargarImagen('Img/006-hd.jpg')" ondblclick="CargarImagen('Img/006-hd.jpg')">
		<img src="Img/006.jpg" alt="Descripción de la imagen" class="responsive-image"></div>


	<br>
	<div class="c-naranja">
		<p>Sabemos por experiencia que en la Unidad LMS100 los datos ambientales influyen en la toma de potencia, 
		en parte porque "el aire" es la variable de la combustion que posee el mayor caudal. Por lo tanto, a 
		mayores temperaturas ambientales, se alcanza con más antelación la temperatura límite en T48 
		(Temperatura en la entrada de PT), impidiendo así tomar carga.
		El aire de combustion se refrigera hasta una temperatura controlada por el sistema mediante T25 
		(Temperatura de Succión en HCP), que a su vez está relacionada con T2 (Temperatura de Succión en LPC).
		A continuación, se presenta un gráfico de la temperatura T2 para los meses de enero a abril en los años
		2022, 2023 y 2024. También se incluye un valor promedio de la temperatura T2, donde se puede apreciar que
		en 2024 se registró una temperatura mayor.</p>
	</div><br>

	<div class="c-gris" onclick="CargarImagen('Img/008-hd.jpg')" ondblclick="CargarImagen('Img/008-hd.jpg')">
		<img src="Img/008.jpg" alt="Descripción de la imagen" class="responsive-image"></div>

	<br>
	<div class="c-gris" style="color: #FFFFFF; background-color: #808080;">
	<p>Todos los datos utilizados en las gráficas siguientes
	consideran únicamente los valores relacionados con la Unidad en servicio.</p>
	</div><br>

	<div class="c-gris">
        <div id="csv-preview"><!-- Aquí se mostrará la vista previa del CSV --></div></div>

	<br>
	<div class="c-gris" style="color: #FFFFFF; background-color: #808080;">
	<p>Con los datos aportados, se buscó establecer una relación entre la temperatura ambiente (T.amb) y la 
		humedad relativa (HR) para determinar la temperatura en la entrada del compresor de baja presión 
		(T2) con una precisión del 96%.</p>
		<ul><b>T2 [°C] = 0.8 * Tamb [°C] + 0.2 * Hamb [%] - 9.85</b></ul>
	</div><br>
	
	<div class="c-gris" style="text-align: center;">
		<p style="font-weight: bold; font-size: 18px;">Calculo Potencia</p>
		<p style="text-align: justify;">La correlación entre los datos de potencia y la 
			temperatura T2 desde octubre de 2022 hasta abril de 2024 indica una relación del 45%. 
			Esto se debe a que, aunque T2 es un buen indicador de la potencia estimada, en la 
		      	trayectoria del flujo de aire se encuentran las variables geométricas VBV1 y VBV2, 
		      	que influyen en la potencia. Estas variables afectan la potencia porque reducen el 
		      	flujo y la presión del aire de combustión<br>A continuación, la expresión que 
		      	relaciona estas dos variables:</p>
		<ul><b> Potencia Activa [MW] = 0.55 * T2 [°C] - 0.03 * T2[°C]^2 + 90.29</b></ul>
		<p>Temperatura ambiente [°C] = 5° Mínimo  - 43° Máximo <br>
			Humedad ambiente [%] = 5% Mínimo - 75%Máximo</p>
		
		<div style="display: inline-block;">
			<p style="text-align: center;">T.Amb [°C] = <span id="TAmbValue">5.0</span></p>
			<input type="range" id="sliderTAmb" min="5.0" max="43" step="0.1" value="5.0" oninput="updateValue('sliderTAmb')">
		</div>
		<span>&nbsp;&nbsp;</span>
		<div style="display: inline-block;">
			<p style="text-align: center;">H.Amb [%] = <span id="HAmbValue">5</span></p>
			<input type="range" id="sliderHAmb" min="5" max="75" value="5" oninput="updateValue('sliderHAmb')">
		</div>
		<h2 style="text-align: center;">
			T2 [°C] = <span id="ResultadoT2">1.40</span></h2>
		<h2 style="text-align: center;">
			Potencia [MW] = <span id="ResultadoPActiva">1.400</span></h2>
	
	</div><br>

	<div class="c-gris">
		<img src="Img/Tendencia de Potencia.jpg" alt="Descripción de la imagen" class="responsive-image"></div>
	

</body>
</html>
